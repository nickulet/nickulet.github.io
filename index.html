<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Quiz</title>
    <script>
        // Questions and their SHA-256 hashed correct answers
        const questions = {
            "q1": { text: "What is 5 + 3?", hash: "2c624232cdd221771294dfbb310aca000a0df6ac8b66b696d90ef06fdefb64a3" }, 
            "q2": { text: "Which animal says 'Meow'?", hash: "77af778b51abd4a3c51c5ddd97204a9c3ae614ebccb75a606c3b6865aed6744e" }, 
            "q3": { text: "What color is a strawberry?", hash: "3b5d5c3712955042212316173ccf37be8007441ae598a3e3f7a9b9d3e08f8b36" }, 
            "q4": { text: "What is the meaning of life?", hash: "9b74c9897bac770ffc029102a200c5de1a59b97b6d022d9d9233ca4f55ab60e7" }, 
            "q5": { text: "Which of these is a fruit?", hash: "6b51ed26c63557f9b2ed3b569a64a376d10bc60e3d533b030f66e6d7a3b7aa9f" },
            "q6": { text: "What color is an apple?", hash: "3b5d5c3712955042212316173ccf37be8007441ae598a3e3f7a9b9d3e08f8b36" }, 
            "q7": { text: "Is water wet?", hash: "c1dfd96eea8cc2b62785275bca38ac261256e278e2a07c573ff44e8fa7de363b" }, 
            "q8": { text: "Which animal purrs?", hash: "b94d27b9934d3e08a52e52d7da7dabfade52f5f1d9683df1c6d5d4b8e49f32b8" }, 
            "q9": { text: "What color is the sky on a clear day?", hash: "e1671797c52e15f763380b45e841ec32cded0d6c506e439f2c3562dc02101691" }, 
            "q10": { text: "What is 0 + 0?", hash: "cfcd208495d565ef66e7dff9f98764da" } 
        };

        // Function to update question display
        function updateQuestion() {
            const selectedQ = document.getElementById("questionSelect").value;
            document.getElementById("questionText").innerText = questions[selectedQ].text;
            document.getElementById("answerInput").value = "";
            document.getElementById("result").innerText = "";
        }

        // Function to hash answers
        async function hashAnswer(answer) {
            const encoder = new TextEncoder();
            const data = encoder.encode(String(answer.trim().toLowerCase())); // Trim spaces
            const hashBuffer = await crypto.subtle.digest('SHA-256', data);
            return Array.from(new Uint8Array(hashBuffer))
                .map(b => b.toString(16).padStart(2, '0'))
                .join('');
        }

        // Function to check answer
        async function checkAnswer() {
            const selectedQ = document.getElementById("questionSelect").value;
            const userAnswer = document.getElementById("answerInput").value.trim();
            const userHash = await hashAnswer(userAnswer);

            console.log(`Question: ${selectedQ}, User Answer: "${userAnswer}", Hash: ${userHash}`);

            if (userHash === questions[selectedQ].hash) {
                document.getElementById("result").innerText = "✅ Correct!";
            } else {
                document.getElementById("result").innerText = "❌ Wrong answer!";
            }
        }
    </script>
</head>
<body>
    <h2>Secure Quiz</h2>

    <label for="questionSelect">Select a question:</label>
    <select id="questionSelect" onchange="updateQuestion()">
        <option value="q1">Question 1</option>
        <option value="q2">Question 2</option>
        <option value="q3">Question 3</option>
        <option value="q4">Question 4</option>
        <option value="q5">Question 5</option>
        <option value="q6">Question 6</option>
        <option value="q7">Question 7</option>
        <option value="q8">Question 8</option>
        <option value="q9">Question 9</option>
        <option value="q10">Question 10</option>
    </select>

    <p id="questionText">What is 5 + 3?</p>
    
    <input type="text" id="answerInput" placeholder="Your answer">
    <button onclick="checkAnswer()">Submit</button>

    <p id="result"></p>
</body>
</html>
